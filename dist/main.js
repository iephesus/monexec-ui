!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function o(){}function r(t,e){for(var n in e)t[n]=e[n];return t}function i(t,e){for(var n in e)t[n]=1;return t}function c(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n)}function a(t){t.parentNode.removeChild(t)}function l(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function g(){return document.createComment("")}function d(t,e,n,o){t.addEventListener(e,n,o)}function m(t,e,n,o){t.removeEventListener(e,n,o)}function h(t,e){t.data=""+e}function p(t,e,n){t.style.setProperty(e,n)}n.r(e);let b={};function v(t,e){var n,o=e.token={};function i(t,n,i,c){if(e.token!==o)return;e.resolved=i&&{[i]:c};const s=r(r({},e.ctx),e.resolved),a=t&&(e.current=t)(e.component,s);e.block&&(e.blocks?e.blocks.forEach((t,o)=>{o!==n&&t&&(b.current={remaining:0,callbacks:[]},t.o(()=>{t.d(1),e.blocks[o]=null}))}):e.block.d(1),a.c(),a[a.i?"i":"m"](e.mount(),e.anchor),e.component.root.set({})),e.block=a,e.blocks&&(e.blocks[n]=a)}if((n=t)&&"function"==typeof n.then){if(t.then(t=>{i(e.then,1,e.value,t)},t=>{i(e.catch,2,e.error,t)}),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved={[e.value]:t}}}function _(){return Object.create(null)}function x(t){this.destroy=o,this.fire("destroy"),this.set=o,this._fragment.d(!1!==t),this._fragment=null,this._state={}}function y(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function k(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var o=0;o<n.length;o+=1){var r=n[o];if(!r.__calling)try{r.__calling=!0,r.call(this,e)}finally{r.__calling=!1}}}function N(t){t._lock=!0,T(t._beforecreate),T(t._oncreate),T(t._aftercreate),t._lock=!1}function j(){return this._state}function O(t,e){t._handlers=_(),t._slots=_(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}function C(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}}function w(t){this._set(r({},t)),this.root._lock||N(this.root)}function S(t){var e=this._state,n={},o=!1;for(var i in t=r(this._staged,t),this._staged={},t)this._differs(t[i],e[i])&&(n[i]=o=!0);o&&(this._state=r(r({},e),t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:e}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:e})))}function R(t){r(this._staged,t)}function T(t){for(;t&&t.length;)t.shift()()}function E(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)}var F={destroy:x,get:j,fire:k,on:C,set:w,_recompute:o,_set:S,_stage:R,_mount:E,_differs:y};var P={fetchState(){const{config:t}=this.get();return fetch("../instance/"+encodeURIComponent(t.Name),{method:"get"}).then(t=>404===t.status?{running:!1}:t.json()).then(t=>{this.set({running:t.running})}).catch(e=>{console.error(t.Name,e)})},start(){const{running:t,config:e}=this.get();if(!t)return this.set({running:null}),fetch("../supervisor/"+encodeURIComponent(e.Name),{method:"post"}).then(t=>{if(200===t.status)return this.fetchState();console.warn(t.status,t.statusText)}).catch(t=>{console.error(e.Name,t)})},stop(){const{running:t,config:e}=this.get();if(t)return this.set({running:null}),fetch("../instance/"+encodeURIComponent(e.Name),{method:"post"}).then(t=>{if(204===t.status)return this.fetchState();console.warn(t.status,t.statusText)}).catch(t=>{console.error(e.Name,t)})}};function I(){clearTimeout(this.timeout)}function L(t,e,n){const o=Object.create(t);return o.name=e[n][0],o.value=e[n][1],o}function D(t,e){var n;return{c(){(n=u("div")).className="circle bg-red svelte-4bmco2"},m(t,e){s(t,n,e)},d(t){t&&a(n)}}}function M(t,e){var n;return{c(){(n=u("div")).className="circle bg-green svelte-4bmco2"},m(t,e){s(t,n,e)},d(t){t&&a(n)}}}function U(t,e){var n;return{c(){(n=u("div")).className="circle bg-grey blinking svelte-4bmco2"},m(t,e){s(t,n,e)},d(t){t&&a(n)}}}function W(t,e){var n;function o(e){t.start()}return{c(){(n=u("button")).textContent="start",d(n,"click",o),n.className="nicebtn svelte-4bmco2"},m(t,e){s(t,n,e)},d(t){t&&a(n),m(n,"click",o)}}}function B(t,e){var n;function o(e){t.stop()}return{c(){(n=u("button")).textContent="stop",d(n,"click",o),n.className="nicebtn svelte-4bmco2"},m(t,e){s(t,n,e)},d(t){t&&a(n),m(n,"click",o)}}}function z(t,e){var n;return{c(){(n=u("button")).textContent="checking...",n.className="nicebtn svelte-4bmco2",n.disabled=!0},m(t,e){s(t,n,e)},d(t){t&&a(n)}}}function A(t,e){var n,o,r,i=e.config.WorkDir;return{c(){n=u("div"),o=f(" at: "),r=f(i),p(n,"font-style","italic"),p(n,"font-family","monospace"),p(n,"color","gray"),p(n,"border-top","lightgray dotted 1px"),p(n,"padding-top","0.5em"),p(n,"padding-left","8px"),p(n,"padding-right","8px"),p(n,"margin-top","0.5em"),p(n,"margin-left","-8px"),p(n,"margin-right","-8px")},m(t,e){s(t,n,e),c(n,o),c(n,r)},p(t,e){t.config&&i!==(i=e.config.WorkDir)&&h(r,i)},d(t){t&&a(n)}}}function q(t,e){var n,o,r,i,l,g=e.config.LogFile;return{c(){n=u("div"),o=f("log: "),r=u("a"),i=f(g),r.href=l="../supervisor/"+e.config.Name+"/log",p(n,"font-style","italic"),p(n,"font-family","monospace"),p(n,"color","gray"),p(n,"border-top","lightgray dotted 1px"),p(n,"padding-top","0.5em"),p(n,"padding-left","8px"),p(n,"padding-right","8px"),p(n,"margin-top","0.5em"),p(n,"margin-left","-8px"),p(n,"margin-right","-8px")},m(t,e){s(t,n,e),c(n,o),c(n,r),c(r,i)},p(t,e){t.config&&g!==(g=e.config.LogFile)&&h(i,g),t.config&&l!==(l="../supervisor/"+e.config.Name+"/log")&&(r.href=l)},d(t){t&&a(n)}}}function G(t,e){for(var n,o=e.Object.entries(e.config.Environment),r=[],i=0;i<o.length;i+=1)r[i]=H(t,L(e,o,i));return{c(){n=u("table");for(var t=0;t<r.length;t+=1)r[t].c();n.className="env svelte-4bmco2"},m(t,e){s(t,n,e);for(var o=0;o<r.length;o+=1)r[o].m(n,null)},p(e,i){if(e.Object||e.config){o=i.Object.entries(i.config.Environment);for(var c=0;c<o.length;c+=1){const s=L(i,o,c);r[c]?r[c].p(e,s):(r[c]=H(t,s),r[c].c(),r[c].m(n,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=o.length}},d(t){t&&a(n),l(r,t)}}}function H(t,e){var n,o,r,i,l,g,d=e.name,m=e.value;return{c(){n=u("tr"),o=u("th"),r=f(d),i=f("\n            "),l=u("td"),g=f(m),p(l,"word-break","break-all")},m(t,e){s(t,n,e),c(n,o),c(o,r),c(n,i),c(n,l),c(l,g)},p(t,e){(t.Object||t.config)&&d!==(d=e.name)&&h(r,d),(t.Object||t.config)&&m!==(m=e.value)&&h(g,m)},d(t){t&&a(n)}}}function J(t){var e;O(this,t),this._state=r(r({Object:Object},{running:null}),t.data),this._intro=!0,this._handlers.destroy=[I],document.getElementById("svelte-4bmco2-style")||((e=u("style")).id="svelte-4bmco2-style",e.textContent=".green.svelte-4bmco2{color:green}.orange.svelte-4bmco2{color:red}.blue.svelte-4bmco2{color:blue}.bg-green.svelte-4bmco2{background-color:limegreen}.bg-red.svelte-4bmco2{background-color:red}.bg-grey.svelte-4bmco2{background-color:lightgray}.circle.svelte-4bmco2{display:inline-block;width:2em;height:2em;border-radius:1em;margin:0.2em}.run.svelte-4bmco2{width:100%;padding:8px;border-radius:5px}.nicebtn.svelte-4bmco2{background:none;border-radius:3px;border:gray dashed 1px;margin:5px;font-size:18px}.nicebtn.svelte-4bmco2:hover{background:grey;color:white;border-color:white;font-size:18px}.mainblock.svelte-4bmco2{display:flex;flex-direction:row}.rborder.svelte-4bmco2{border-right:darkgray dashed 1px;padding-right:1em}.env.svelte-4bmco2{width:100%;text-align:left;font-family:monospace}.content.svelte-4bmco2{display:flex;flex-direction:column;box-shadow:darkgrey 0 0 3px;border-radius:5px;padding:8px;font-family:Roboto serif;border:lightgray 1px solid;margin:10px}.bottom-panel.svelte-4bmco2{background-color:lightgray;margin-left:-8px;margin-right:-8px;margin-bottom:-8px;padding:5px;font-family:monospace;border-bottom-left-radius:5px;border-bottom-right-radius:5px}.blinking.svelte-4bmco2{animation:svelte-4bmco2-blinking 2s linear infinite}@keyframes svelte-4bmco2-blinking{50%{opacity:0}}",c(document.head,e)),this._fragment=function(t,e){var n,o,r,i,l,g,d,m,b,v,_,x,y,k,N,j,O,C,w,S,R,T,E,F,P,I,L,H,J,K,Q,V,X,Y,Z=e.config.Name,$=e.config.Command,tt=e.config.Args.join(" "),et=-1===e.config.Restart?"∞":e.config.Restart,nt=(e.config.RestartTimeout/1e9).toFixed(2),ot=(e.config.StopTimeout/1e9).toFixed(2);function rt(t){return null===t.running?U:t.running?M:D}var it=rt(e),ct=it(t,e);function st(t){return null===t.running?z:t.running?B:W}var at=st(e),lt=at(t,e),ut=e.config.WorkDir&&A(0,e),ft=e.config.LogFile&&q(0,e),gt=e.config.Environment&&G(t,e);return{c(){n=u("div"),o=u("div"),ct.c(),r=f("\n        "),i=u("h1"),l=f(Z),g=f("\n    "),d=u("div"),lt.c(),m=f("\n    "),b=u("div"),v=u("div"),_=u("pre"),(x=u("span")).textContent="cmd:",y=f(" "),k=f($),N=f(" "),j=f(tt),O=f("\n            "),ut&&ut.c(),C=f("\n            "),ft&&ft.c(),w=f("\n    "),gt&&gt.c(),S=f("\n\n    "),R=u("div"),T=u("span"),E=f("restart: "),F=f(et),P=f("\n        "),I=u("span"),L=f("restart timeout: "),H=f(nt),J=f("s"),K=f("\n        "),Q=u("span"),V=f("stop timeout: "),X=f(ot),Y=f("s"),p(i,"margin","0"),p(o,"display","flex"),p(o,"flex-direction","row"),p(_,"margin","0"),v.className="run svelte-4bmco2",b.className="mainblock svelte-4bmco2",T.className="green rborder svelte-4bmco2",I.className="blue rborder svelte-4bmco2",Q.className="orange svelte-4bmco2",R.className="bottom-panel svelte-4bmco2",n.className="content svelte-4bmco2"},m(t,e){s(t,n,e),c(n,o),ct.m(o,null),c(o,r),c(o,i),c(i,l),c(n,g),c(n,d),lt.m(d,null),c(n,m),c(n,b),c(b,v),c(v,_),c(_,x),c(_,y),c(_,k),c(_,N),c(_,j),c(v,O),ut&&ut.m(v,null),c(v,C),ft&&ft.m(v,null),c(n,w),gt&&gt.m(n,null),c(n,S),c(n,R),c(R,T),c(T,E),c(T,F),c(R,P),c(R,I),c(I,L),c(I,H),c(I,J),c(R,K),c(R,Q),c(Q,V),c(Q,X),c(Q,Y)},p(e,i){it!==(it=rt(i))&&(ct.d(1),(ct=it(t,i)).c(),ct.m(o,r)),e.config&&Z!==(Z=i.config.Name)&&h(l,Z),at!==(at=st(i))&&(lt.d(1),(lt=at(t,i)).c(),lt.m(d,null)),e.config&&$!==($=i.config.Command)&&h(k,$),e.config&&tt!==(tt=i.config.Args.join(" "))&&h(j,tt),i.config.WorkDir?ut?ut.p(e,i):((ut=A(0,i)).c(),ut.m(v,C)):ut&&(ut.d(1),ut=null),i.config.LogFile?ft?ft.p(e,i):((ft=q(0,i)).c(),ft.m(v,null)):ft&&(ft.d(1),ft=null),i.config.Environment?gt?gt.p(e,i):((gt=G(t,i)).c(),gt.m(n,S)):gt&&(gt.d(1),gt=null),e.config&&et!==(et=-1===i.config.Restart?"∞":i.config.Restart)&&h(F,et),e.config&&nt!==(nt=(i.config.RestartTimeout/1e9).toFixed(2))&&h(H,nt),e.config&&ot!==(ot=(i.config.StopTimeout/1e9).toFixed(2))&&h(X,ot)},d(t){t&&a(n),ct.d(),lt.d(),ut&&ut.d(),ft&&ft.d(),gt&&gt.d()}}}(this,this._state),this.root._oncreate.push(()=>{(function(t){let e=()=>{this.timeout=setTimeout(()=>{this.fetchState().finally(()=>{e()})},2e3)};this.fetchState().then(()=>e())}).call(this),this.fire("update",{changed:i({},this._state),current:this._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),N(this))}r(J.prototype,F),r(J.prototype,P);var K=J;function Q(t,e,n){const o=Object.create(t);return o.config=e[n],o}function V(t,e){return{c:o,m:o,p:o,d:o}}function X(t,e){for(var n,o=e.configs,r=[],i=0;i<o.length;i+=1)r[i]=Y(t,Q(e,o,i));return{c(){for(var t=0;t<r.length;t+=1)r[t].c();n=g()},m(t,e){for(var o=0;o<r.length;o+=1)r[o].m(t,e);s(t,n,e)},p(e,i){if(e.configs){o=i.configs;for(var c=0;c<o.length;c+=1){const s=Q(i,o,c);r[c]?r[c].p(e,s):(r[c]=Y(t,s),r[c].c(),r[c].m(n.parentNode,n))}for(;c<r.length;c+=1)r[c].d(1);r.length=o.length}},d(t){l(r,t),t&&a(n)}}}function Y(t,e){var n={config:e.config},o=new K({root:t.root,store:t.store,data:n});return{c(){o._fragment.c()},m(t,e){o._mount(t,e)},p(t,e){var n={};t.configs&&(n.config=e.config),o._set(n)},d(t){o.destroy(t)}}}function Z(t,e){var n;return{c(){(n=u("p")).textContent="loading..."},m(t,e){s(t,n,e)},p:o,d(t){t&&a(n)}}}function $(t){O(this,t),this._state=r({configs:fetch("../supervisors",{method:"get"}).then(t=>t.json()).then(t=>Promise.all(t.map(t=>fetch("../supervisor/"+encodeURIComponent(t),{method:"get"}).then(t=>t.json())))).catch(function(t){console.error(t)})},t.data),this._intro=!0,this._fragment=function(t,e){var n,o;let i={component:t,ctx:e,current:null,pending:Z,then:X,catch:V,value:"configs",error:"null"};return v(o=e.configs,i),{c(){n=g(),i.block.c()},m(t,e){s(t,n,e),i.block.m(t,i.anchor=e),i.mount=(()=>n.parentNode),i.anchor=n},p(t,n){e=n,i.ctx=e,"configs"in t&&o!==(o=e.configs)&&v(o,i)||i.block.p(t,r(r({},e),i.resolved))},d(t){t&&a(n),i.block.d(t),i=null}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),N(this))}r($.prototype,F);new $({target:document.getElementById("supervisors"),data:{}})}]);